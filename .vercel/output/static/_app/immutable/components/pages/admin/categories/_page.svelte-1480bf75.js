import{S as Q,i as W,s as X,R,T as H,w as z,a as V,k as $,q as x,x as A,c as G,l as E,m as D,r as ee,h as p,n as m,y as S,b as C,F as v,_ as te,U,Y as _e,V as K,f as j,t as T,z as N,W as ae,K as se,B as le,Q as be,u as ge,o as we,e as Z,g as oe,L as $e,P as Ee,d as re,M as Fe,N as De,O as ke,X as pe,D as Pe}from"../../../../chunks/index-2a8bc61d.js";import{b as Ce,P as Ie,D as je,a as Ve}from"../../../../chunks/Requests-e3af1178.js";import{P as he,I as me,i as ve}from"../../../../chunks/formValidation-8d80168c.js";import{B as ye}from"../../../../chunks/Button-757541fc.js";function Ge(l){let e;return{c(){e=x("Edytuj kategorie")},l(t){e=ee(t,"Edytuj kategorie")},m(t,r){C(t,e,r)},d(t){t&&p(e)}}}function Te(l){let e,t,r,a,n,s,o,c,i,u,g,_,y,I,d,w,k,h,F,M;function Y(f){l[7](f)}let O={title:"Nie wypełniłeś wszystkich pól.",message:"Spróbuj ponownie ..."};l[0]!==void 0&&(O.showPopup=l[0]),e=new he({props:O}),R.push(()=>H(e,"showPopup",Y,l[0]));function J(f){l[8](f)}let q={placeholder:"Label of the category",width:85};return l[1]!==void 0&&(q.value=l[1]),i=new me({props:q}),R.push(()=>H(i,"value",J,l[1])),d=new ye({props:{type:"submit",$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){z(e.$$.fragment),r=V(),a=$("div"),n=$("form"),s=$("h1"),o=x("Edytuj kategorie"),c=V(),z(i.$$.fragment),g=V(),_=$("div"),y=$("input"),I=V(),z(d.$$.fragment),w=V(),k=$("div"),this.h()},l(f){A(e.$$.fragment,f),r=G(f),a=E(f,"DIV",{class:!0});var b=D(a);n=E(b,"FORM",{class:!0});var P=D(n);s=E(P,"H1",{class:!0});var B=D(s);o=ee(B,"Edytuj kategorie"),B.forEach(p),c=G(P),A(i.$$.fragment,P),g=G(P),_=E(P,"DIV",{class:!0});var L=D(_);y=E(L,"INPUT",{class:!0,type:!0}),L.forEach(p),I=G(P),A(d.$$.fragment,P),P.forEach(p),b.forEach(p),w=G(f),k=E(f,"DIV",{class:!0}),D(k).forEach(p),this.h()},h(){m(s,"class","svelte-13jcmr7"),m(y,"class","color svelte-13jcmr7"),m(y,"type","color"),m(_,"class","form__color svelte-13jcmr7"),m(n,"class","svelte-13jcmr7"),m(a,"class","categories__form svelte-13jcmr7"),m(k,"class","categories__form__backdrop svelte-13jcmr7")},m(f,b){S(e,f,b),C(f,r,b),C(f,a,b),v(a,n),v(n,s),v(s,o),v(n,c),S(i,n,null),v(n,g),v(n,_),v(_,y),te(y,l[2]),v(n,I),S(d,n,null),C(f,w,b),C(f,k,b),h=!0,F||(M=[U(y,"input",l[9]),U(n,"submit",_e(l[4])),U(k,"click",l[3])],F=!0)},p(f,[b]){const P={};!t&&b&1&&(t=!0,P.showPopup=f[0],K(()=>t=!1)),e.$set(P);const B={};!u&&b&2&&(u=!0,B.value=f[1],K(()=>u=!1)),i.$set(B),b&4&&te(y,f[2]);const L={};b&32768&&(L.$$scope={dirty:b,ctx:f}),d.$set(L)},i(f){h||(j(e.$$.fragment,f),j(i.$$.fragment,f),j(d.$$.fragment,f),h=!0)},o(f){T(e.$$.fragment,f),T(i.$$.fragment,f),T(d.$$.fragment,f),h=!1},d(f){N(e,f),f&&p(r),f&&p(a),N(i),N(d),f&&p(w),f&&p(k),F=!1,ae(M)}}}function ze(l,e,t){const r=se();let{editData:a}=e,{showForm:n=!1}=e,s=!1,{category_id:o,label:c,color:i,posts:u}=a;const g=()=>{t(5,n=!n)},_=()=>{t(1,c=""),t(2,i="")},y=h=>{r("updateGrid",{category_id:h,label:c,color:i,posts:u})};async function I(){if(ve([c,i])){t(0,s=!0);return}y(o),_(),t(5,n=!1)}function d(h){s=h,t(0,s)}function w(h){c=h,t(1,c)}function k(){i=this.value,t(2,i)}return l.$$set=h=>{"editData"in h&&t(6,a=h.editData),"showForm"in h&&t(5,n=h.showForm)},[s,c,i,g,I,n,a,d,w,k]}class Ae extends Q{constructor(e){super(),W(this,e,ze,Te,X,{editData:6,showForm:5})}}function ie(l,e,t){const r=l.slice();return r[1]=e[t],r}function ne(l){let e,t,r=l[1].title+"",a,n,s;return{c(){e=$("a"),t=$("div"),a=x(r),n=V(),this.h()},l(o){e=E(o,"A",{href:!0,class:!0});var c=D(e);t=E(c,"DIV",{class:!0});var i=D(t);a=ee(i,r),i.forEach(p),n=G(c),c.forEach(p),this.h()},h(){m(t,"class","category__post svelte-1sbap9l"),m(e,"href",s="/"+l[1].url),m(e,"class","svelte-1sbap9l")},m(o,c){C(o,e,c),v(e,t),v(t,a),v(e,n)},p(o,c){c&1&&r!==(r=o[1].title+"")&&ge(a,r),c&1&&s!==(s="/"+o[1].url)&&m(e,"href",s)},d(o){o&&p(e)}}}function Se(l){let e,t=l[0],r=[];for(let a=0;a<t.length;a+=1)r[a]=ne(ie(l,t,a));return{c(){e=$("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var n=D(e);for(let s=0;s<r.length;s+=1)r[s].l(n);n.forEach(p),this.h()},h(){m(e,"class","category__posts svelte-1sbap9l")},m(a,n){C(a,e,n);for(let s=0;s<r.length;s+=1)r[s].m(e,null)},p(a,[n]){if(n&1){t=a[0];let s;for(s=0;s<t.length;s+=1){const o=ie(a,t,s);r[s]?r[s].p(o,n):(r[s]=ne(o),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},i:le,o:le,d(a){a&&p(e),be(r,a)}}}function Ne(l,e,t){let{posts:r=[]}=e;return l.$$set=a=>{"posts"in a&&t(0,r=a.posts)},[r]}class Me extends Q{constructor(e){super(),W(this,e,Ne,Se,X,{posts:0})}}function Be(l){let e,t,r,a,n,s,o,c,i,u,g,_,y,I,d,w,k;return n=new Me({props:{posts:l[0]}}),{c(){e=$("div"),t=$("div"),r=x(l[1]),a=V(),z(n.$$.fragment),s=V(),o=$("div"),c=$("div"),i=$("div"),u=$("i"),g=V(),_=$("div"),y=$("i"),this.h()},l(h){e=E(h,"DIV",{class:!0,style:!0});var F=D(e);t=E(F,"DIV",{class:!0});var M=D(t);r=ee(M,l[1]),M.forEach(p),a=G(F),A(n.$$.fragment,F),s=G(F),o=E(F,"DIV",{class:!0});var Y=D(o);c=E(Y,"DIV",{class:!0});var O=D(c);i=E(O,"DIV",{class:!0});var J=D(i);u=E(J,"I",{class:!0}),D(u).forEach(p),J.forEach(p),g=G(O),_=E(O,"DIV",{class:!0});var q=D(_);y=E(q,"I",{class:!0}),D(y).forEach(p),q.forEach(p),O.forEach(p),Y.forEach(p),F.forEach(p),this.h()},h(){m(t,"class","category__title svelte-15uz2vg"),m(u,"class","fa-solid fa-pen-to-square svelte-15uz2vg"),m(i,"class","category__edit svelte-15uz2vg"),m(y,"class","fa-solid fa-trash-can svelte-15uz2vg"),m(_,"class","category__delete svelte-15uz2vg"),m(c,"class","category__tools svelte-15uz2vg"),m(o,"class","category__footer svelte-15uz2vg"),m(e,"class","categories__category svelte-15uz2vg"),m(e,"style",I="border : 3px solid "+l[2]+";")},m(h,F){C(h,e,F),v(e,t),v(t,r),v(e,a),S(n,e,null),v(e,s),v(e,o),v(o,c),v(c,i),v(i,u),v(c,g),v(c,_),v(_,y),d=!0,w||(k=[U(i,"click",l[4]),U(_,"click",l[3])],w=!0)},p(h,[F]){(!d||F&2)&&ge(r,h[1]);const M={};F&1&&(M.posts=h[0]),n.$set(M),(!d||F&4&&I!==(I="border : 3px solid "+h[2]+";"))&&m(e,"style",I)},i(h){d||(j(n.$$.fragment,h),d=!0)},o(h){T(n.$$.fragment,h),d=!1},d(h){h&&p(e),N(n),w=!1,ae(k)}}}function Le(l,e,t){const r=se();let{label:a=""}=e,{category_id:n=0}=e,{createdAt:s=""}=e,{color:o=""}=e,{posts:c=[]}=e;function i(){r("deleteCategory",n)}function u(){r("editCategory",{category_id:n,label:a,color:o,posts:c})}const g=async()=>{for(let _=0;_<c.length;_++){const I=c[_].post_id,d=await Ce(I);t(0,c[_]=d,c)}};return we(()=>{g()}),l.$$set=_=>{"label"in _&&t(1,a=_.label),"category_id"in _&&t(5,n=_.category_id),"createdAt"in _&&t(6,s=_.createdAt),"color"in _&&t(2,o=_.color),"posts"in _&&t(0,c=_.posts)},[c,a,o,i,u,n,s]}class Oe extends Q{constructor(e){super(),W(this,e,Le,Be,X,{label:1,category_id:5,createdAt:6,color:2,posts:0})}}function ce(l,e,t){const r=l.slice();return r[12]=e[t],r}function ue(l,e){let t,r,a;const n=[e[12]];let s={};for(let o=0;o<n.length;o+=1)s=Fe(s,n[o]);return r=new Oe({props:s}),r.$on("deleteCategory",e[5]),r.$on("editCategory",e[3]),{key:l,first:null,c(){t=Z(),z(r.$$.fragment),this.h()},l(o){t=Z(),A(r.$$.fragment,o),this.h()},h(){this.first=t},m(o,c){C(o,t,c),S(r,o,c),a=!0},p(o,c){e=o;const i=c&1?De(n,[ke(e[12])]):{};r.$set(i)},i(o){a||(j(r.$$.fragment,o),a=!0)},o(o){T(r.$$.fragment,o),a=!1},d(o){o&&p(t),N(r,o)}}}function fe(l){let e,t,r;function a(s){l[6](s)}let n={editData:l[1]};return l[2]!==void 0&&(n.showForm=l[2]),e=new Ae({props:n}),R.push(()=>H(e,"showForm",a,l[2])),e.$on("updateGrid",l[4]),{c(){z(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,o){S(e,s,o),r=!0},p(s,o){const c={};o&2&&(c.editData=s[1]),!t&&o&4&&(t=!0,c.showForm=s[2],K(()=>t=!1)),e.$set(c)},i(s){r||(j(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Ue(l){let e,t=[],r=new Map,a,n,s,o=l[0];const c=u=>u[12].category_id;for(let u=0;u<o.length;u+=1){let g=ce(l,o,u),_=c(g);r.set(_,t[u]=ue(_,g))}let i=l[2]&&fe(l);return{c(){e=$("div");for(let u=0;u<t.length;u+=1)t[u].c();a=V(),i&&i.c(),n=Z(),this.h()},l(u){e=E(u,"DIV",{class:!0});var g=D(e);for(let _=0;_<t.length;_+=1)t[_].l(g);g.forEach(p),a=G(u),i&&i.l(u),n=Z(),this.h()},h(){m(e,"class","categories__display svelte-1w5hm9i")},m(u,g){C(u,e,g);for(let _=0;_<t.length;_+=1)t[_].m(e,null);C(u,a,g),i&&i.m(u,g),C(u,n,g),s=!0},p(u,[g]){g&41&&(o=u[0],oe(),t=$e(t,g,c,1,u,o,r,e,Ee,ue,null,ce),re()),u[2]?i?(i.p(u,g),g&4&&j(i,1)):(i=fe(u),i.c(),j(i,1),i.m(n.parentNode,n)):i&&(oe(),T(i,1,1,()=>{i=null}),re())},i(u){if(!s){for(let g=0;g<o.length;g+=1)j(t[g]);j(i),s=!0}},o(u){for(let g=0;g<t.length;g+=1)T(t[g]);T(i),s=!1},d(u){u&&p(e);for(let g=0;g<t.length;g+=1)t[g].d();u&&p(a),i&&i.d(u),u&&p(n)}}}function qe(l,e,t){const r=se();let{categories:a=[]}=e,n,s=!1;async function o(d){const w=`/api/categories/${d}`;await je(w)}const c=d=>{t(1,n=d.detail),t(2,s=!0)},i=d=>{const w=d.detail;u(w)},u=async d=>{const w=`/api/categories/${d.category_id}`;await Ie(w,d),g(d),t(2,s=!1)},g=d=>{const w=d.category_id,k=a.findIndex(h=>h.category_id===w);t(0,a[k]=d,a)},_=d=>{const w=d.detail;o(w),y(w)},y=d=>{r("deleteFromGrid",d)};function I(d){s=d,t(2,s)}return l.$$set=d=>{"categories"in d&&t(0,a=d.categories)},[a,n,s,c,i,_,I]}class Re extends Q{constructor(e){super(),W(this,e,qe,Ue,X,{categories:0})}}function He(l){let e;return{c(){e=x("Submit")},l(t){e=ee(t,"Submit")},m(t,r){C(t,e,r)},d(t){t&&p(e)}}}function Ke(l){let e,t,r,a,n,s,o,c,i,u,g,_,y,I,d,w,k,h,F,M;function Y(f){l[6](f)}let O={title:"Nie wypełniłeś wszystkich pól.",message:"Spróbuj ponownie ..."};l[2]!==void 0&&(O.showPopup=l[2]),e=new he({props:O}),R.push(()=>H(e,"showPopup",Y,l[2]));function J(f){l[7](f)}let q={placeholder:"Label of the category",width:85};return l[0]!==void 0&&(q.value=l[0]),i=new me({props:q}),R.push(()=>H(i,"value",J,l[0])),d=new ye({props:{type:"submit",$$slots:{default:[He]},$$scope:{ctx:l}}}),{c(){z(e.$$.fragment),r=V(),a=$("div"),n=$("form"),s=$("h1"),o=x("Add a new category"),c=V(),z(i.$$.fragment),g=V(),_=$("div"),y=$("input"),I=V(),z(d.$$.fragment),w=V(),k=$("div"),this.h()},l(f){A(e.$$.fragment,f),r=G(f),a=E(f,"DIV",{class:!0});var b=D(a);n=E(b,"FORM",{class:!0});var P=D(n);s=E(P,"H1",{class:!0});var B=D(s);o=ee(B,"Add a new category"),B.forEach(p),c=G(P),A(i.$$.fragment,P),g=G(P),_=E(P,"DIV",{class:!0});var L=D(_);y=E(L,"INPUT",{class:!0,type:!0}),L.forEach(p),I=G(P),A(d.$$.fragment,P),P.forEach(p),b.forEach(p),w=G(f),k=E(f,"DIV",{class:!0}),D(k).forEach(p),this.h()},h(){m(s,"class","svelte-13jcmr7"),m(y,"class","color svelte-13jcmr7"),m(y,"type","color"),m(_,"class","form__color svelte-13jcmr7"),m(n,"class","svelte-13jcmr7"),m(a,"class","categories__form svelte-13jcmr7"),m(k,"class","categories__form__backdrop svelte-13jcmr7")},m(f,b){S(e,f,b),C(f,r,b),C(f,a,b),v(a,n),v(n,s),v(s,o),v(n,c),S(i,n,null),v(n,g),v(n,_),v(_,y),te(y,l[1]),v(n,I),S(d,n,null),C(f,w,b),C(f,k,b),h=!0,F||(M=[U(y,"input",l[8]),U(n,"submit",_e(l[4])),U(k,"click",l[3])],F=!0)},p(f,[b]){const P={};!t&&b&4&&(t=!0,P.showPopup=f[2],K(()=>t=!1)),e.$set(P);const B={};!u&&b&1&&(u=!0,B.value=f[0],K(()=>u=!1)),i.$set(B),b&2&&te(y,f[1]);const L={};b&4096&&(L.$$scope={dirty:b,ctx:f}),d.$set(L)},i(f){h||(j(e.$$.fragment,f),j(i.$$.fragment,f),j(d.$$.fragment,f),h=!0)},o(f){T(e.$$.fragment,f),T(i.$$.fragment,f),T(d.$$.fragment,f),h=!1},d(f){N(e,f),f&&p(r),f&&p(a),N(i),N(d),f&&p(w),f&&p(k),F=!1,ae(M)}}}function Qe(l,e,t){const r=se();let{showForm:a=!1}=e,n="",s="",o=!1;const c=()=>{t(5,a=!a)},i=()=>{t(0,n=""),t(1,s="")},u=d=>{r("addToGrid",{category_id:d,label:n,color:s})};async function g(){let d;if(ve([n,s])){t(2,o=!0);return}await Ve("/api/categories",{label:n,color:s}).then(F=>F.json()).then(F=>{d=F.category_id}),u(d),i(),t(5,a=!1)}function _(d){o=d,t(2,o)}function y(d){n=d,t(0,n)}function I(){s=this.value,t(1,s)}return l.$$set=d=>{"showForm"in d&&t(5,a=d.showForm)},[n,s,o,c,g,a,_,y,I]}class We extends Q{constructor(e){super(),W(this,e,Qe,Ke,X,{showForm:5})}}function de(l){let e,t,r;function a(s){l[2](s)}let n={};return l[0]!==void 0&&(n.showForm=l[0]),e=new We({props:n}),R.push(()=>H(e,"showForm",a,l[0])),e.$on("addToGrid",l[3]),{c(){z(e.$$.fragment)},l(s){A(e.$$.fragment,s)},m(s,o){S(e,s,o),r=!0},p(s,o){const c={};!t&&o&1&&(t=!0,c.showForm=s[0],K(()=>t=!1)),e.$set(c)},i(s){r||(j(e.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),r=!1},d(s){N(e,s)}}}function Xe(l){let e,t,r,a,n,s,o,c=l[0]&&de(l);return{c(){e=$("div"),t=$("i"),r=V(),c&&c.c(),a=Z(),this.h()},l(i){e=E(i,"DIV",{class:!0});var u=D(e);t=E(u,"I",{class:!0}),D(t).forEach(p),u.forEach(p),r=G(i),c&&c.l(i),a=Z(),this.h()},h(){m(t,"class","fa-solid fa-circle-plus svelte-pyb8iu"),m(e,"class","categories__add svelte-pyb8iu")},m(i,u){C(i,e,u),v(e,t),C(i,r,u),c&&c.m(i,u),C(i,a,u),n=!0,s||(o=U(e,"click",l[1]),s=!0)},p(i,[u]){i[0]?c?(c.p(i,u),u&1&&j(c,1)):(c=de(i),c.c(),j(c,1),c.m(a.parentNode,a)):c&&(oe(),T(c,1,1,()=>{c=null}),re())},i(i){n||(j(c),n=!0)},o(i){T(c),n=!1},d(i){i&&p(e),i&&p(r),c&&c.d(i),i&&p(a),s=!1,o()}}}function Ye(l,e,t){let r=!1;const a=()=>{t(0,r=!r)};function n(o){r=o,t(0,r)}function s(o){pe.call(this,l,o)}return[r,a,n,s]}class Je extends Q{constructor(e){super(),W(this,e,Ye,Xe,X,{})}}function Ze(l){let e,t,r,a,n,s;t=new Je({}),t.$on("addToGrid",l[2]);function o(i){l[3](i)}let c={};return l[0]!==void 0&&(c.categories=l[0]),a=new Re({props:c}),R.push(()=>H(a,"categories",o,l[0])),a.$on("deleteFromGrid",l[1]),{c(){e=$("div"),z(t.$$.fragment),r=V(),z(a.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var u=D(e);A(t.$$.fragment,u),r=G(u),A(a.$$.fragment,u),u.forEach(p),this.h()},h(){m(e,"class","admin__categories svelte-1nay1i8")},m(i,u){C(i,e,u),S(t,e,null),v(e,r),S(a,e,null),s=!0},p(i,[u]){const g={};!n&&u&1&&(n=!0,g.categories=i[0],K(()=>n=!1)),a.$set(g)},i(i){s||(j(t.$$.fragment,i),j(a.$$.fragment,i),s=!0)},o(i){T(t.$$.fragment,i),T(a.$$.fragment,i),s=!1},d(i){i&&p(e),N(t),N(a)}}}function xe(l,e,t){let{categories:r=[]}=e;const a=o=>{const c=o.detail,i=r.filter(u=>c!=u.category_id);t(0,r=i)};function n(o){pe.call(this,l,o)}function s(o){r=o,t(0,r)}return l.$$set=o=>{"categories"in o&&t(0,r=o.categories)},[r,a,n,s]}class et extends Q{constructor(e){super(),W(this,e,xe,Ze,X,{categories:0})}}function tt(l){let e,t,r,a;function n(o){l[3](o)}let s={};return l[0]!==void 0&&(s.categories=l[0]),t=new et({props:s}),R.push(()=>H(t,"categories",n,l[0])),t.$on("addToGrid",l[1]),{c(){e=V(),z(t.$$.fragment),this.h()},l(o){Pe("svelte-1gkbdyr",document.head).forEach(p),e=G(o),A(t.$$.fragment,o),this.h()},h(){document.title="Categories panel"},m(o,c){C(o,e,c),S(t,o,c),a=!0},p(o,[c]){const i={};!r&&c&1&&(r=!0,i.categories=o[0],K(()=>r=!1)),t.$set(i)},i(o){a||(j(t.$$.fragment,o),a=!0)},o(o){T(t.$$.fragment,o),a=!1},d(o){o&&p(e),N(t,o)}}}function st(l,e,t){let{data:r={}}=e,a=r.categories;const n=o=>{const c=o.detail;t(0,a=[...a,c])};function s(o){a=o,t(0,a)}return l.$$set=o=>{"data"in o&&t(2,r=o.data)},[a,n,r,s]}class it extends Q{constructor(e){super(),W(this,e,st,tt,X,{data:2})}}export{it as default};
